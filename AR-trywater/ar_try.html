<!DOCTYPE html>
<html>

<head>
    <title>AR2</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">

    <script src="../js/aframe-1.4.0/dist/aframe-master.js"></script>
    <script src="../js/aframe-1.4.0/dist/aframe-master.min.js"></script>
    <script src='../js/AR.js-master/three.js/build/ar-threex-location-only.js'></script>
    <script src='../js/AR.js-master/aframe/build/aframe-ar.js'></script>
    <script src="../js/src/aframe-event-set-component.js"></script>
    <script src="../js/src/extra-stats.umd.min.js"></script>
    <script src="../js/src/aframe-physics-system.js"></script>


</head>

<body>
    <span>用属性固定住一个东西的gps信息</span>
    <button onclick="ToIndex()">返回导航页</button>

    <a-scene embedded>
        <a-camera id="cam" position="0 0 0"></a-camera>
        <a-box id='box1' scale="0.3 0.3 0.3" position="0 -0.5 -1" color='green'></a-box>
        <a-box id='box2' scale="0.61 0.61 0.61" position="0 0.5 1" color='red'></a-box>
        <a-text id="txt" , value="Hello, world!" position="-0.5 -0 -1  " color="black" scale="1 1 1"></a-text>

    </a-scene>

    <script>function ToIndex() { window.location.href = "../index.html"; }</script>

    <div style="position: fixed; bottom: 0; left: 0;">
        <button onclick="Sca(100)">change x1</button>
        <button onclick="Sca(500)">change x5</button>
        <button onclick="Sca(1000)">change x10</button>

    </div>

    <script>
        let box1 = document.querySelector('#box1');


        function showPosition(position) {
            var lat0 = position.coords.latitude + 0.0001*10;
            var lon0 = position.coords.longitude;

            box1.setAttribute('gps-entity-place', { latitude: lat0, longitude: lon0 });

            var box2 = document.querySelector('#box2');
            box2.setAttribute('gps-entity-place', { latitude: 2.053591161, longitude: 11.395998675 });

            var cam = document.querySelector('#cam');
            cam.setAttribute('gps-camera', 'simulateLatitude: ' + lat0 + '; simulateLongitude: ' + lon0);
            cam.setAttribute('arjs-device-orientation-controls', 'smoothingFactor: 0.8');

            var dis1 = box1.getAttribute('gps-entity-place').latitude;
            var dis2 = box2.getAttribute('gps-entity-place').latitude;

            var txt1 = document.querySelector('#txt');
            txt1.setAttribute('value', 'l1: ' + dis1 + ' l2: ' + dis2);

        }

        function showError(error) {
        }
        if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition, showError); }



    </script>

    <script>

        function Sca(m) {
            var numlat = box1.getAttribute('gps-entity-place').latitude;
            var numlon = box1.getAttribute('gps-entity-place').longitude;
            var nn = 0.000001 * m;
            numlat = numlat + nn;
            box1.setAttribute('gps-entity-place', { latitude: numlat, longitude: numlon });
            console.log('ssssss: ' + box1.getAttribute('gps-entity-place').latitude)
            txt1.setAttribute('value', 'l1: ' + box1.getAttribute('gps-entity-place').latitude);

        }
    </script>

</body>
</html>
