<!DOCTYPE html>
<html>

<head>
    <title>AR2</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">

    <script src="../js/aframe-1.4.0/dist/aframe-master.js"></script>
    <script src="../js/aframe-1.4.0/dist/aframe-master.min.js"></script>
    <script src='../js/AR.js-master/three.js/build/ar-threex-location-only.js'></script>
    <script src='../js/AR.js-master/aframe/build/aframe-ar.js'></script>
    <script src="../js/src/aframe-event-set-component.js"></script>
    <script src="../js/src/extra-stats.umd.min.js"></script>
    <script src="../js/src/aframe-physics-system.js"></script>


</head>

<body>
    <span>用属性固定住一个东西的gps信息</span>
    <button onclick="ToIndex()">返回导航页</button>

    <a-scene>
        <a-camera id="qaq">
            <a-text id="txt" , value="Hello, world!" position="-0.5 -0 -1  " color="black" scale="0.6 0.6 0.6"></a-text>
            <a-box id="box1" material="color: yellow" position="0 20 0" />

        </a-camera>

    </a-scene>

    <script>function ToIndex() { window.location.href = "../index.html"; }</script>

    <script>
        let newEntity = document.querySelector('#qaq');
        newEntity.setAttribute('arjs-device-orientation-controls', 'smoothingFactor: 0.8');
        //newEntity.setAttribute('gps-camera', 'simulateLatitude: ' + cameraLatitude + '; simulateLongitude: ' + cameraLongitude);
        newEntity.setAttribute('cursor', 'rayOrigin: mouse');
    </script>

    <script>

        function successCallback(location) {
            var lon = location.coords.longitude;
            var lat = location.coords.latitude;

            newEntity.setAttribute('gps-camera', 'simulateLatitude: ' + lat + '; simulateLongitude: ' + lon);

            var txt1 = document.querySelector('#txt');
            txt1.setAttribute('scale', '0.3 0.3 0.3');
            txt1.setAttribute('value', 'gaibianqian');


            var box1 = document.querySelector('#box1');
            box1.setAttribute('gps-entity-place', { latitude: lat, longitude: lon });
            const gpsCoords = box1.getAttribute('gps-entity-place');

            txt1.setAttribute('value', gpsCoords.latitude);


        };

        function errorCallback(error) {
            var txt = document.querySelector('#txt');
            txt.setAttribute('value', 'qwert');
        };

        if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(successCallback, errorCallback); };


    </script>

</body>



</html>
